<!DOCTYPE html>
<!--Raymond Kwok-->
<html>
	<head>
		<title></title>
		<link rel = "stylesheet" type = "text/css" href = "PokerCasino.css" />
		<style></style>
		<script>
		function initialize()
		{	
			jBoard = document.getElementById("board");
			jGameStatus = document.getElementById("game_status");
			jBetAmount = document.getElementById("bet_amount");
			jSetAmount = document.getElementById("set_amount");

			//board will contain up to 5 cards 
			BOARD_SIZE = 5;
			
			//will start with no cards on board
			cardsOnBoard = [];
			
			//assign point values to each respective card
			//ace has a point value of 13, 2 has a point value of 1, 3 has a point value of 2, etc.
			pointValues = [13, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12];
			
			//cards selected on the board
			selected = [];
			
			//how much you want to bet
			betMoney = 0;
			//amount used to help calculate how much you have left
			finalMoney = 0;
			//how much you currently have 
			accountMoney = 2000;
			display();
			
			//assigns point values to special cards
			ACE = 1, JACK = 11, QUEEN = 12, KING = 13;
			//assigns point values to the suites
			CLUB = 0, DIAMOND = 1, HEART = 2, SPADE = 3;
			
			//creates the deck 			
			myDeck = generateDeckWithPointValues(pointValues);
			//shuffles the deck
			myDeck = shuffleDeck(myDeck);
			
			//helps indicate if you can click on the buttons or not to perform the action
			replaceCards.disabled = true;
			replaceHand.disabled = true; 
			
			//deals cards from top of the deck to board
			for (var i = 0; i < BOARD_SIZE; i++)
			{
				var theTD = jBoard.insertCell(i);
				cardsOnBoard.push(dealCard(myDeck)); 
				theTD.innerHTML = "<img src = 'card images/" + cardsOnBoard[i].cardImg + "'/>";
				theTD.setAttribute("onclick", "selectUnselect(this);");
				selected.push(false);
			}			
		}
		
		//helper function to help pick a random card
		function getRandomInteger(lower, upper)
		{
			multiplier = upper - (lower - 1);
			rnd = parseInt(Math.random() * multiplier) + lower;
			
			return rnd;
		}
		
		/*
		//debug function to make sure the entire deck is generated correctly
		function generateStandardDeck()
		{
			//begins as an empty array to fill up
			var deck = [];
			
			//loops through all the numbers
			for (var r = ACE; r <= KING; r++)
			{
				//loops through all the suites
				for (var s = CLUB; s <= SPADE; s++)
				{
					var card = new Object();
					card.rank = r;
					card.suit = s;
					card.cardImg = r + "-" + s + ".png";
					deck.push(card);
				}
			}	
			return deck;
		}
		*/
		
		//creates the deck assigning each card a point value
		function generateDeckWithPointValues(pointValues)
		{
			//deck starts at as an empty array to be filled up
			var deck = [];
			//ensures there are 13 point values 
			if (pointValues.length != 13)
				return deck;
			
			//loops through all the numbers			
			for (var r = ACE; r <= KING; r++)
			{
				//loops through all the suites
				for (var s = CLUB; s <= SPADE; s++)
				{
					var card = new Object();
					card.rank = r;
					card.suit = s;
					card.pointValue = pointValues[r-1];
					card.cardImg = r + "-" + s + ".png";
					deck.push(card);
				}
			}	
			return deck;
		}
		
		//shuffles the deck 
		function shuffleDeck(deck)
		{
			//creates a new array as the shuffled deck to place random cards in 
			var randomDeck = [];
			
			//as long as the deck still has cards
			while(deck.length > 0)
			{
				//takes a random card from the deck
				//starts at 0-51 first, then 0-50, then 0-49, etc 
				var temp = getRandomInteger(0, deck.length - 1);
				//removes the card from the deck at temp position
				var card = deck.splice(temp, 1);
				//take that card and toss it in the randomDeck array
				randomDeck.push(card[0]);	
			}
			return randomDeck;
		}
		
		//deals the top card of the deck
		function dealCard(deck)
		{
			//removes the first position card aka the top card
			return deck.shift();
		}
		
		//constructor for the Card object
		function Card(theRank, theSuit, theImg, thePointValue)
		{
			this.rank = theRank;
			this.suit = theSuit;
		}
	    
		//allows the user to selected card
		//cardValue is the point value of the selected card
		function selectUnselect(cardValue)
		{
			//loop through the board of cards 
			for (var i = 0; i < jBoard.cells.length; i++)
			{
				if (jBoard.cells[i] == cardValue)
				{
					selected[i] = !selected[i];
					
					//makes the border of the selected card red 
					if (selected[i])
						cardValue.style.border = "solid red";
					//otherwise de-select the card and remove the red border 
					else
						cardValue.style.border = "none";
					return;
				}
			}
		}
		
		//replace the card at the index
		function replaceCard(index)
		{
			var theTD = jBoard.cells[index];
			
			//while there are still cards, it will deal the top card
			if (myDeck.length > 0)
			{
				cardsOnBoard[index] = dealCard(myDeck);
				theTD.innerHTML = "<img src = 'card images/" + cardsOnBoard[index].cardImg + "'/>";
			}
			//if not, display a backwards card 
			else
			{
				cardsOnBoard[index] = null;
				theTD.innerHTML = "<img src = 'card images/back-red-75-1.png'/>";
			}
			//takes the card selected and highlight it with a red border
			selectUnselect(theTD);
		}
		
		/*
		//debug function to make sure all the indexes of each card is correct
		function getIndexesOfCardsOnBoard()
		{
			var selectedIndexes = [];
			for (var i = 0; i < BOARD_SIZE; i++)
			{
				if (cardsOnBoard[i] != null)
				{
					selectedIndexes.push(i);
				}
			}	
			return selectedIndexes;
		}
		*/
		
		//gets all the cards that were selected
		function getSelectedIndexes()
		{
			var selectedIndexes = [];
			
			//loops through all the cards on board
			//take all the selected cards and push it in the array to return in the end
			for (var i = 0; i < BOARD_SIZE; i++)
			{
				if (selected[i] && cardsOnBoard != null)
				{
					selectedIndexes.push(i);
				}
			}	
			return selectedIndexes;
		}
		
		//returns if there are two pairs of cards with the same value 
		function containsTwoPairs()
		{
			for(var i = 0; i < cardsOnBoard.length - 1; i++)
			{
				var card1 = cardsOnBoard[i];
				var rank1 = card1.rank;
				
				for(var j = i + 1; j < cardsOnBoard.length; j++)
				{	
					var card2 = cardsOnBoard[j];
					var rank2 = card2.rank; 
					
					if (rank2 == rank1)
					{
						for(var k =  i + 1; k < cardsOnBoard.length - 1; k++)
						{
							var card3 = cardsOnBoard[k];
							var rank3 = card3.rank;
								
							for(var a = k + 1; a < cardsOnBoard.length; a++)
							{	
								var card4 = cardsOnBoard[a];
								var rank4 = card4.rank; 
								
								//ensures that you do not get a triple or quad
								if (rank1 != rank3 && rank3 == rank4)
								{
									return true;
								}	
							}	
						}	
					}	
				}	
			}							
			return false;
		}
		
		//returns if there are three cards with the same point value
		function containsTriple()
		{
			for(var i = 0; i < cardsOnBoard.length - 2; i++)
			{ 
				var card1 = cardsOnBoard[i];
				var rank1 = card1.rank;

				for(var j = i + 1; j < cardsOnBoard.length - 1; j++)
				{
					var card2 = cardsOnBoard[j];
					var rank2 = card2.rank;

					for(var k = j + 1; k < cardsOnBoard.length; k++)
					{	
						var card3 = cardsOnBoard[k];
						var rank3 = card3.rank;

						if (rank1 == rank2 && rank2 == rank3) 
						{
							return true;
						}
					}	
				}
			}
			return false;
		}

		//returns if there are four cards with the same point value
		function containsFourOfKind()
		{
			for(var i = 0; i < cardsOnBoard.length - 3; i++)
			{ 
				var card1 = cardsOnBoard[i];
				var rank1 = card1.rank;

				for(var j = i + 1; j < cardsOnBoard.length - 2; j++)
				{
					var card2 = cardsOnBoard[j];
					var rank2 = card2.rank;

					for(var k = j + 1; k < cardsOnBoard.length - 1; k++)
					{	
						var card3 = cardsOnBoard[k];
						var rank3 = card3.rank;
						
						for(var n = k + 1; n < cardsOnBoard.length; n++)
						{	
							var card4 = cardsOnBoard[n];
							var rank4 = card4.rank;	
							
							if (rank1 == rank2 && rank2 == rank3 && rank3 == rank4) 
							{
								return true;
							}
						}
					}	
				}
			}
			return false;
		}
		
		
		//returns if all 5 cards is a straight
		function containsStraight()
		{	
			for(var i = 0; i < cardsOnBoard.length; i++)
			{ 
				var card1 = cardsOnBoard[i];
				var rank1 = card1.pointValue;
				
				for(var j = 0; j < cardsOnBoard.length; j++)
				{
					var card2 = cardsOnBoard[j];
					var rank2 = card2.pointValue;
				
					for(var k = 0; k < cardsOnBoard.length; k++)
					{
						var card3 = cardsOnBoard[k];
						var rank3 = card3.pointValue;
						
						for(var n = 0; n < cardsOnBoard.length; n++)
						{
							var card4 = cardsOnBoard[n];
							var rank4 = card4.pointValue;
							
							for(var m = 0; m < cardsOnBoard.length; m++)
							{
								var card5 = cardsOnBoard[m];
								var rank5 = card5.pointValue;
								
								if (rank1 < rank2 && rank1 < rank3 && rank1 < rank4 && rank1 < rank5)
								{
									if (rank2 == rank1 + 1 && rank3 == rank1 + 2 && rank4 == rank1 + 3 && rank5 == rank1 + 4)
									{
										return true;
												
									}	
								}
							}	
						}	
					}	
				} 	
			}
			return false;
		} 
		
		
		/*
		//returns if all 5 cards is a straight
		//insertion sort alternative
		function containsStraight()
		{	
			var txd = cardsOnBoard;
	
			for(var i = 1; i < txd.length; i++)
			{ 
				var card1 = txd[i];
				var rank1 = card1.pointValue;
				
				var j = i - 1;
				var temp = rank1;
				
				while (j >= 0 && txd[j].pointValue > temp)
				{
					txd[j + 1] = txd[j];
					j--;
				}
				txd[j+1] = temp;
			}
			for(i = 1; i < txd.length; i++)
			{
				if(txd[i-1].pointValue + 1 != txd[i].pointValue)
				{
					return false;
				}
			}
			return true;
		} 
		*/
		
		function containsFlush()
		{			
			var card1 = cardsOnBoard[0];
			var suit1 = card1.suit;
			
			var card2 = cardsOnBoard[1];
			var suit2 = card2.suit;
			
			var card3 = cardsOnBoard[2];
			var suit3 = card3.suit;
			
			var card4 = cardsOnBoard[3];
			var suit4 = card4.suit;
			
			var card5 = cardsOnBoard[4];
			var suit5 = card5.suit;
			
			if (suit1 == suit2 && suit2 == suit3 && suit3 == suit4 && suit4 == suit5) 
			{
				return true;
			}	
		
			return false;

		}

		function containsFullHouse()
		{
			for(var i = 0; i < cardsOnBoard.length - 2; i++)
			{
				var card1 = cardsOnBoard[i];
				var rank1 = card1.rank;

				for(var j = i + 1; j < cardsOnBoard.length - 1; j++)
				{
					var card2 = cardsOnBoard[j];
					var rank2 = card2.rank;

					for(var k = j + 1; k < cardsOnBoard.length; k++)
					{	
						var card3 = cardsOnBoard[k];
						var rank3 = card3.rank;
								
						if (rank1 == rank2 && rank2 == rank3) 
						{
							for (var n = 0; n < cardsOnBoard.length - 1; n++)
							{
								var card4 = cardsOnBoard[n];
								var rank4 = card4.rank;
								
								if (rank4 != rank1)
								{
									for (var m = n + 1; m < cardsOnBoard.length; m++)
									{
										var card5 = cardsOnBoard[m];
										var rank5 = card5.rank;
										
										if (rank4 == rank5)
										{
											return true;
										}	
									}	
								}	
							}	
						}	
					}	
				}	
			}							
			return false;
		} 

		function containStraightFlush()
		{
			if (containsStraight() && containsFlush())
			{
				return true;
			}
			return false;
		} 

		function containRoyalStraightFlush()
		{
			for(var i = 0; i < cardsOnBoard.length; i++)
			{ 
				var card1 = cardsOnBoard[i];
				var rank1 = card1.pointValue;
				
				for(var j = 0; j < cardsOnBoard.length; j++)
				{
					var card2 = cardsOnBoard[j];
					var rank2 = card2.pointValue;
				
					for(var k = 0; k < cardsOnBoard.length; k++)
					{
						var card3 = cardsOnBoard[k];
						var rank3 = card3.pointValue;
						
						for(var n = 0; n < cardsOnBoard.length; n++)
						{
							var card4 = cardsOnBoard[n];
							var rank4 = card4.pointValue;
							
							for(var m = 0; m < cardsOnBoard.length; m++)
							{
								var card5 = cardsOnBoard[m];
								var rank5 = card5.pointValue;
								
								if (rank1 == 9 && rank2 == 10 && rank3 == 11 && rank4 == 12 && rank5 == 13)
								{
									if (containsFlush())
									{
										return true;	
									}	
								}	
							}	
						}	
					}	
				}	
			}
			return false;
		} 
		
		function updateMoney()
		{	
			if (containRoyalStraightFlush())
			{
				betMoney = betMoney * 250;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Royal Straight Flush! <br> You got $" + betMoney;
				display();		
				return true;
			}
				 
			else if (containStraightFlush())
			{
				betMoney = betMoney * 25;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Straight Flush! <br> You got $" + betMoney;
				display();
				return true;
			} 
					
			else if (containsFourOfKind())
			{
				betMoney = betMoney * 20;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Four Of a Kind! <br> You got $" + betMoney;
				display();
				return true;
			} 
				
			else if (containsFullHouse())
			{
				betMoney = betMoney * 10;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Full House! <br> You got $" + betMoney;
				display();
				return true;
			}  
				
			else if (containsFlush())
			{
				betMoney = betMoney * 5;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Flush! <br> You got $" + betMoney;
				display();
				return true;
			}  

			else if (containsStraight())
			{
				betMoney = betMoney * 3;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Straight! <br> You got $" + betMoney + ".";
				display();
				return true;
			} 

			else if (containsTriple())
			{
				betMoney = betMoney * 2;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Triple! <br> You got $" + betMoney;
				display();
				return true;
			} 

			else if (containsTwoPairs())
			{
				betMoney = betMoney * 1;
				accountMoney = accountMoney + betMoney;
				jGameStatus.innerHTML = "Two Pairs! <br> You got $" + betMoney;
				display();
				return true;
			} 
			else
			{
				accountMoney = accountMoney - betMoney;
				jGameStatus.innerHTML = "No combos! <br> You've lost $" + betMoney;
				display();
			}
		}
		
		function replace()
		{
			var selectedIndexes = getSelectedIndexes();
			replaceCards.disabled = true;
			replaceHand.disabled = false;
			betOne.disabled = true;
			betTen.disabled = true;
			betHundred.disabled = true;
			betThousand.disabled = true; 
			
			for (var i = 0; i < selectedIndexes.length; i++)
			{
				replaceCard(selectedIndexes[i]);
			}

			updateMoney();
		} 
		
		function newHand()
		{					
			myDeck = generateDeckWithPointValues(pointValues);
			myDeck = shuffleDeck(myDeck);
			betMoney = 0;
			finalMoney = 0;
			display();
			
			replaceHand.disabled = true;
			betOne.disabled = false;			
			betTen.disabled = false;
			betHundred.disabled = false;
			betThousand.disabled = false; 
			
			for(var i = 0; i < BOARD_SIZE; i++)
			{
				var theTD = jBoard.cells[i];
				selected[i] = true;
				replaceCard(i);
			}
			
			jGameStatus.innerHTML = "";
		}
		
		function restart()
		{				
			myDeck = generateDeckWithPointValues(pointValues);
			myDeck = shuffleDeck(myDeck);
			betMoney = 0;
			finalMoney = 0;
			accountMoney = 2000;
			display();
			
			replaceCards.disabled = true;
			replaceHand.disabled = true;
			betOne.disabled = false;
			betTen.disabled = false;
			betHundred.disabled = false;
			betThousand.disabled = false; 
			
			for(var i = 0; i < BOARD_SIZE; i++)
			{
				var theTD = jBoard.cells[i];
				selected[i] = true;
				replaceCard(i);
			}
			
			jGameStatus.innerHTML = "";
		}
		
		
		function bet(number)
		{
			betMoney += number;
			finalMoney += number;
			
			if (accountMoney >= betMoney)
			{
				display();
				replaceCards.disabled = false;
			}
			else
			{
				betMoney -= number;
				finalMoney -= number;
			}
			display();
		}
		
		function resetMoney()
		{
			betMoney = 0;
			finalMoney = 0;
			replaceCards.disabled = true; 
			display();
		}
		
		function display()
		{
			jSetAmount.innerHTML = "Have: $" + accountMoney;
			jBetAmount.innerHTML = "Betting: $" + finalMoney;
		}
		
		</script>
	</head>
	<body onload = "initialize();">
		<div id = "theTitle"> Poker Casino! <br/> Place a bet and click on the cards you want to replace.</div>
		
		<h1 id = "bigContainer">
			<div id = "theTable">
				<span>	
					<table id = "comboTable">
						<tr>
							<th colspan = "4"> Poker Comboes </th>
						</tr> 
						<tr>
							<td> Royal Straight Flush </td> 
							<td> x250 </td>
							<td> Flush </td>
							<td> x5 </td>
						</tr>
						<tr>
							<td> Straight Flush </td>
							<td> x25 </td>
							<td> Straight </td>
							<td> x3 </td>
						</tr>
						<tr>
							<td> Four Of a Kind </td> 
							<td> x20 </td>
							<td> Three Of a Kind </td>
							<td> x2 </td>
						</tr>
						<tr>
							<td> Full House </td>
							<td> x10 </td>
							<td> Two Pairs </td>
							<td> x1 </td>
						</tr>	
					</table>
				</span>	
			</div>
			
			<div id = "pokerboard">
				<span>
					<table>
						<tr id = "board">
						
						</tr>
					</table>
				</span><br/>

				<div id = "game_status"></div> 
			</div>
			
			<div id = "fixHand">
				<span>
					<button id = "replaceCards" onclick = "replace();"> Replace </button>
					<button id = "replaceHand" onclick = "newHand();"> Deal New Hand </button><br/>
					<button id = "restartGame" onclick = "restart();"> Restart Game</button>
				</span>	<br/>
				<span>
					<h1 id = "set_amount"></h1>
					<h1 id = "bet_amount"></h1>
					<h1> Bet How Much? </h1>
				</span>
				<span>	
					<button id = "betZero" onclick = "resetMoney()"> Reset Amount </button><br/>
					<button id = "betTen" onclick = "bet(10);"> $10 </button>
					<button id = "betHundred" onclick = "bet(100);"> $100 </button>
					<button id = "betThousand" onclick = "bet(1000);"> $1000 </button>
					<button id = "betOne" onclick = "bet(10000);"> $10000 </button>
					
				</span>
			</div><br/><br/>
		</h1>
	</body>
</html>